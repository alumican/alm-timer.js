/*! alm-timer.js 1.0.7 (c) 2022 alumican, licensed under the MIT, more information https://github.com/alumican/alm-timer.js */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("alm_coreutil")):"function"==typeof define&&define.amd?define(["exports","alm_coreutil"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).alm_timer=t.alm_timer||{},t.alm_coreutil)}(this,(function(t,e){"use strict";var s;t.TimerEventType=void 0,(s=t.TimerEventType||(t.TimerEventType={})).count="count",s.complete="complete",s.start="start",s.stop="stop",s.reset="reset";class i extends CustomEvent{constructor(t,e){super(t,e)}}class n extends EventTarget{constructor(s=1e3,i=0){super(),this.timerHandler=()=>{++this.elapsedCount;let s=!1;this.repeatCount>0&&this.elapsedCount>=this.repeatCount?(s=!0,this.isRunning=!1,this.tElapsedTime=this.tDelay,this.stopDelay()):(this.tStartTime=e.DateUtil.now(),this.tDelay!==this.delay&&this.startDelay(this.delay)),this.dispatch(t.TimerEventType.count),s&&(this.isComplete=!0,this.dispatch(t.TimerEventType.complete))},this.delay=s,this.repeatCount=i,this.isRunning=!1,this.isComplete=!1,this.tId=-1,this.reset()}start(){this.isComplete||this.isRunning||(this.isRunning=!0,this.tStartTime=-1!==this.tRestTime?e.DateUtil.now()-this.tElapsedTime:e.DateUtil.now(),this.startDelay(-1!==this.tRestTime?this.tRestTime:this.delay),this.dispatch(t.TimerEventType.start))}stop(){this.isRunning&&(this.stopInternal(),this.dispatch(t.TimerEventType.stop))}stopInternal(){this.isRunning&&(this.isRunning=!1,this.tElapsedTime=e.DateUtil.now()-this.tStartTime,this.tRestTime=this.delay-this.tElapsedTime,this.stopDelay())}reset(){this.stopInternal(),this.isComplete=!1,this.elapsedCount=0,this.tStartTime=0,this.tElapsedTime=0,this.tRestTime=-1,this.dispatch(t.TimerEventType.reset)}restart(){this.reset(),this.start()}startDelay(t){this.stopDelay(),this.tDelay=t,this.tId=window.setInterval(this.timerHandler,this.tDelay)}stopDelay(){-1!==this.tId&&(clearInterval(this.tId),this.tId=-1)}dispatch(t){this.dispatchEvent(new i(t,{detail:{elapsedCount:this.elapsedCount,repeatCount:this.repeatCount,restCount:this.getRestCount()}}))}getIsRunning(){return this.isRunning}getIsComplete(){return this.isComplete}getDelay(){return this.delay}setDelay(t){this.delay=t}getElapsedTime(){return this.isRunning?e.DateUtil.now()-this.tStartTime:this.tElapsedTime}getRestTime(){return this.delay-this.getElapsedTime()}getElapsedCount(){return this.elapsedCount}getRepeatCount(){return this.repeatCount}setRepeatCount(t){this.repeatCount=t}getRestCount(){return this.repeatCount-this.elapsedCount}}t.Timer=n,t.TimerEvent=i,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.min.js.map
